<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Missing Value Analysis — Unified Thyroid Dataset</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=IBM+Plex+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0c10;
    --surface: #12151c;
    --surface2: #1a1f2e;
    --border: #252a38;
    --accent: #e8ff47;
    --accent2: #ff6b47;
    --accent3: #47c4ff;
    --accent4: #b847ff;
    --text: #e2e8f0;
    --muted: #64748b;
    --critical: #ff4747;
    --warning: #ffb347;
    --good: #47ff8a;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'IBM Plex Mono', monospace;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Animated background grid */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: 
      linear-gradient(rgba(232,255,71,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(232,255,71,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  .container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 40px 24px 80px;
    position: relative;
    z-index: 1;
  }

  /* Header */
  .header {
    margin-bottom: 60px;
    animation: fadeUp 0.8s ease both;
  }

  .header-label {
    font-size: 11px;
    font-weight: 500;
    letter-spacing: 0.25em;
    color: var(--accent);
    text-transform: uppercase;
    margin-bottom: 12px;
    opacity: 0.8;
  }

  .header h1 {
    font-family: 'Syne', sans-serif;
    font-size: clamp(2rem, 5vw, 3.5rem);
    font-weight: 800;
    line-height: 1.05;
    letter-spacing: -0.02em;
    color: #fff;
  }

  .header h1 span {
    color: var(--accent);
  }

  .header-meta {
    margin-top: 16px;
    font-size: 12px;
    color: var(--muted);
    letter-spacing: 0.05em;
  }

  .header-meta strong { color: var(--accent3); }

  /* KPI row */
  .kpi-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 48px;
    animation: fadeUp 0.8s 0.1s ease both;
  }

  .kpi-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 20px 24px;
    position: relative;
    overflow: hidden;
    transition: border-color 0.2s;
  }

  .kpi-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: var(--accent-color, var(--accent));
  }

  .kpi-card:hover { border-color: var(--accent-color, var(--accent)); }

  .kpi-label {
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 8px;
  }

  .kpi-value {
    font-family: 'Syne', sans-serif;
    font-size: 2rem;
    font-weight: 800;
    color: #fff;
    line-height: 1;
  }

  .kpi-sub {
    font-size: 11px;
    color: var(--muted);
    margin-top: 6px;
  }

  /* Section title */
  .section-title {
    font-family: 'Syne', sans-serif;
    font-size: 1.1rem;
    font-weight: 700;
    letter-spacing: -0.01em;
    color: #fff;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .section-title::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border);
  }

  .section-tag {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    font-weight: 500;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--accent);
    background: rgba(232,255,71,0.08);
    border: 1px solid rgba(232,255,71,0.2);
    padding: 3px 8px;
    border-radius: 2px;
    margin-bottom: 10px;
    display: inline-block;
  }

  /* Missing bar chart */
  .bar-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 28px;
    margin-bottom: 24px;
    animation: fadeUp 0.8s 0.2s ease both;
  }

  .bar-row {
    display: grid;
    grid-template-columns: 200px 1fr 70px;
    align-items: center;
    gap: 12px;
    margin-bottom: 10px;
  }

  .bar-label {
    font-size: 11px;
    color: var(--text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-align: right;
  }

  .bar-track {
    height: 18px;
    background: rgba(255,255,255,0.04);
    border-radius: 2px;
    overflow: hidden;
    position: relative;
  }

  .bar-fill {
    height: 100%;
    border-radius: 2px;
    transition: width 1.5s cubic-bezier(0.16, 1, 0.3, 1);
    position: relative;
  }

  .bar-fill::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, transparent 60%, rgba(255,255,255,0.15));
  }

  .bar-pct {
    font-size: 11px;
    color: var(--muted);
    text-align: right;
    white-space: nowrap;
  }

  /* Source breakdown */
  .source-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(360px, 1fr));
    gap: 20px;
    margin-bottom: 24px;
    animation: fadeUp 0.8s 0.3s ease both;
  }

  .source-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 24px;
  }

  .source-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
  }

  .source-name {
    font-family: 'Syne', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    color: #fff;
  }

  .source-rows {
    font-size: 11px;
    color: var(--muted);
    background: var(--surface2);
    border: 1px solid var(--border);
    padding: 3px 8px;
    border-radius: 2px;
  }

  .source-stat-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
  }

  .source-stat-col {
    font-size: 11px;
    color: var(--text);
    width: 160px;
    flex-shrink: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .source-bar-track {
    flex: 1;
    height: 10px;
    background: rgba(255,255,255,0.04);
    border-radius: 2px;
    overflow: hidden;
  }

  .source-bar-fill {
    height: 100%;
    border-radius: 2px;
  }

  .source-stat-pct {
    font-size: 11px;
    color: var(--muted);
    width: 42px;
    text-align: right;
  }

  /* Pattern grid */
  .pattern-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 28px;
    margin-bottom: 24px;
    animation: fadeUp 0.8s 0.35s ease both;
  }

  .pattern-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 12px;
  }

  .pattern-card {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 3px;
    padding: 14px;
  }

  .pattern-tier {
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-bottom: 8px;
    font-weight: 500;
  }

  .pattern-cols {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .pattern-col-chip {
    font-size: 10px;
    color: var(--text);
    background: rgba(255,255,255,0.05);
    border-radius: 2px;
    padding: 3px 7px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Insights */
  .insights-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 28px;
    margin-bottom: 24px;
    animation: fadeUp 0.8s 0.4s ease both;
  }

  .insight-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .insight-item {
    display: grid;
    grid-template-columns: 28px 1fr;
    gap: 14px;
    align-items: start;
  }

  .insight-icon {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
    flex-shrink: 0;
    margin-top: 2px;
  }

  .insight-icon.critical { background: rgba(255,71,71,0.15); border: 1px solid rgba(255,71,71,0.3); }
  .insight-icon.warning  { background: rgba(255,179,71,0.15); border: 1px solid rgba(255,179,71,0.3); }
  .insight-icon.info     { background: rgba(71,196,255,0.15); border: 1px solid rgba(71,196,255,0.3); }
  .insight-icon.good     { background: rgba(71,255,138,0.15); border: 1px solid rgba(71,255,138,0.3); }

  .insight-body strong {
    font-family: 'Syne', sans-serif;
    font-size: 0.85rem;
    font-weight: 700;
    color: #fff;
    display: block;
    margin-bottom: 4px;
  }

  .insight-body p {
    font-size: 12px;
    color: var(--muted);
    line-height: 1.7;
  }

  .insight-body code {
    color: var(--accent3);
    background: rgba(71,196,255,0.08);
    padding: 1px 5px;
    border-radius: 2px;
    font-size: 11px;
  }

  /* Recommendations */
  .rec-section {
    background: linear-gradient(135deg, rgba(232,255,71,0.04), rgba(71,196,255,0.04));
    border: 1px solid rgba(232,255,71,0.15);
    border-radius: 4px;
    padding: 28px;
    animation: fadeUp 0.8s 0.5s ease both;
  }

  .rec-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 16px;
  }

  .rec-card {
    background: rgba(0,0,0,0.3);
    border: 1px solid var(--border);
    border-radius: 3px;
    padding: 18px;
  }

  .rec-number {
    font-family: 'Syne', sans-serif;
    font-size: 2rem;
    font-weight: 800;
    color: var(--accent);
    opacity: 0.3;
    line-height: 1;
    margin-bottom: 8px;
  }

  .rec-title {
    font-family: 'Syne', sans-serif;
    font-size: 0.85rem;
    font-weight: 700;
    color: #fff;
    margin-bottom: 8px;
  }

  .rec-desc {
    font-size: 11px;
    color: var(--muted);
    line-height: 1.7;
  }

  /* Footer */
  .footer {
    margin-top: 60px;
    padding-top: 24px;
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 11px;
    color: var(--muted);
    animation: fadeUp 0.8s 0.6s ease both;
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .severity-legend {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 7px;
    font-size: 11px;
    color: var(--muted);
  }

  .legend-dot {
    width: 10px; height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
  }
</style>
</head>
<body>
<div class="container">

  <!-- Header -->
  <div class="header">
    <div class="header-label">Data Quality Report</div>
    <h1>Missing Value<br><span>Analysis</span></h1>
    <div class="header-meta">
      Dataset: <strong>unified_dataset_validated.csv</strong> &nbsp;·&nbsp;
      Generated: <strong>February 2026</strong> &nbsp;·&nbsp;
      Domain: <strong>Thyroid / Endocrinology</strong>
    </div>
  </div>

  <!-- KPIs -->
  <div class="kpi-grid">
    <div class="kpi-card" style="--accent-color: var(--accent3)">
      <div class="kpi-label">Total Records</div>
      <div class="kpi-value">225,568</div>
      <div class="kpi-sub">3 source datasets merged</div>
    </div>
    <div class="kpi-card" style="--accent-color: var(--accent)">
      <div class="kpi-label">Total Columns</div>
      <div class="kpi-value">37</div>
      <div class="kpi-sub">Demographics + lab values + flags</div>
    </div>
    <div class="kpi-card" style="--accent-color: var(--critical)">
      <div class="kpi-label">Complete Rows</div>
      <div class="kpi-value">0</div>
      <div class="kpi-sub">100% of rows have ≥1 missing value</div>
    </div>
    <div class="kpi-card" style="--accent-color: var(--warning)">
      <div class="kpi-label">Cols with Missing</div>
      <div class="kpi-value">35/37</div>
      <div class="kpi-sub">Only <code>source</code> &amp; <code>class</code> are complete</div>
    </div>
    <div class="kpi-card" style="--accent-color: var(--accent2)">
      <div class="kpi-label">Critical Cols (≥94%)</div>
      <div class="kpi-value">21</div>
      <div class="kpi-sub">Structural missingness from merging</div>
    </div>
    <div class="kpi-card" style="--accent-color: var(--good)">
      <div class="kpi-label">Lowest Missing</div>
      <div class="kpi-value">0.002%</div>
      <div class="kpi-sub"><code>age</code> — only 5 records missing</div>
    </div>
  </div>

  <!-- Bar chart: all columns -->
  <div class="bar-section">
    <div class="section-tag">Column-level</div>
    <div class="section-title">Missing Rate by Column</div>
    <div class="severity-legend">
      <div class="legend-item"><div class="legend-dot" style="background:var(--critical)"></div>Critical ≥ 90%</div>
      <div class="legend-item"><div class="legend-dot" style="background:var(--accent2)"></div>High 50–90%</div>
      <div class="legend-item"><div class="legend-dot" style="background:var(--warning)"></div>Moderate 10–50%</div>
      <div class="legend-item"><div class="legend-dot" style="background:var(--accent3)"></div>Low 1–10%</div>
      <div class="legend-item"><div class="legend-dot" style="background:var(--good)"></div>Minimal < 1%</div>
    </div>
    <div id="barChart"></div>
  </div>

  <!-- Source breakdown -->
  <div class="section-tag">Source-level</div>
  <div class="section-title" style="margin-bottom:20px">Missing Rate by Dataset Source</div>
  <div class="source-grid">

    <!-- cancer_risk -->
    <div class="source-card">
      <div class="source-header">
        <div>
          <div class="source-name">cancer_risk</div>
          <div style="font-size:11px;color:var(--muted);margin-top:3px">Thyroid cancer risk data</div>
        </div>
        <div class="source-rows">212,691 rows · 94.3%</div>
      </div>
      <div style="background:rgba(255,71,71,0.08);border:1px solid rgba(255,71,71,0.2);border-radius:3px;padding:12px;font-size:11px;color:#ff9a9a;margin-bottom:16px;">
        ⚠ <strong>21 columns are 100% missing</strong> — this source lacks all thyroid-specific clinical flags (lithium, psych, pregnant, goitre, tumor, etc.) and thyroid lab measurements (tt4, t4u, fti, tsh_measured flags). Only demographic + core lab values present.
      </div>
      <div class="source-stat-row">
        <div class="source-stat-col">country, ethnicity</div>
        <div class="source-bar-track"><div class="source-bar-fill" style="width:100%;background:var(--good)"></div></div>
        <div class="source-stat-pct">0%</div>
      </div>
      <div class="source-stat-row">
        <div class="source-stat-col">age, sex, tsh, t3, t4</div>
        <div class="source-bar-track"><div class="source-bar-fill" style="width:100%;background:var(--good)"></div></div>
        <div class="source-stat-pct">0%</div>
      </div>
      <div class="source-stat-row">
        <div class="source-stat-col">21 clinical columns</div>
        <div class="source-bar-track"><div class="source-bar-fill" style="width:100%;background:var(--critical)"></div></div>
        <div class="source-stat-pct">100%</div>
      </div>
    </div>

    <!-- hypothyroid -->
    <div class="source-card">
      <div class="source-header">
        <div>
          <div class="source-name">hypothyroid</div>
          <div style="font-size:11px;color:var(--muted);margin-top:3px">Hypothyroid screening data</div>
        </div>
        <div class="source-rows">3,705 rows · 1.6%</div>
      </div>
      <div style="background:rgba(255,179,71,0.08);border:1px solid rgba(255,179,71,0.2);border-radius:3px;padding:12px;font-size:11px;color:#ffd9a0;margin-bottom:16px;">
        ℹ 10 columns are 100% missing (patient_id, ethnicity, country, iodine_deficiency, etc.) — structural gaps due to different source schema. Lab values partially measured with notable T3 missingness.
      </div>
      <div class="source-stat-row">
        <div class="source-stat-col">patient_id, ethnicity...</div>
        <div class="source-bar-track"><div class="source-bar-fill" style="width:100%;background:var(--critical)"></div></div>
        <div class="source-stat-pct">100%</div>
      </div>
      <div class="source-stat-row">
        <div class="source-stat-col">t3</div>
        <div class="source-bar-track"><div class="source-bar-fill" style="width:19%;background:var(--warning)"></div></div>
        <div class="source-stat-pct">19.0%</div>
      </div>
      <div class="source-stat-row">
        <div class="source-stat-col">t4u, fti</div>
        <div class="source-bar-track"><div class="source-bar-fill" style="width:8.7%;background:var(--accent3)"></div></div>
        <div class="source-stat-pct">8.7%</div>
      </div>
      <div class="source-stat-row">
        <div class="source-stat-col">tsh</div>
        <div class="source-bar-track"><div class="source-bar-fill" style="width:8.2%;background:var(--accent3)"></div></div>
        <div class="source-stat-pct">8.2%</div>
      </div>
      <div class="source-stat-row">
        <div class="source-stat-col">sex</div>
        <div class="source-bar-track"><div class="source-bar-fill" style="width:4%;background:var(--good)"></div></div>
        <div class="source-stat-pct">4.0%</div>
      </div>
    </div>

    <!-- thyroidDF -->
    <div class="source-card">
      <div class="source-header">
        <div>
          <div class="source-name">thyroidDF</div>
          <div style="font-size:11px;color:var(--muted);margin-top:3px">General thyroid function data</div>
        </div>
        <div class="source-rows">9,172 rows · 4.1%</div>
      </div>
      <div style="background:rgba(71,196,255,0.08);border:1px solid rgba(71,196,255,0.2);border-radius:3px;padding:12px;font-size:11px;color:#a0e4ff;margin-bottom:16px;">
        ℹ 9 columns are 100% missing (country, t4, ethnicity, etc.) — schema mismatch. Highest missing among lab values is T3 at 28.4%. Core clinical flags (on_thyroxine, psych, etc.) are fully present.
      </div>
      <div class="source-stat-row">
        <div class="source-stat-col">country, t4, ethnicity...</div>
        <div class="source-bar-track"><div class="source-bar-fill" style="width:100%;background:var(--critical)"></div></div>
        <div class="source-stat-pct">100%</div>
      </div>
      <div class="source-stat-row">
        <div class="source-stat-col">t3</div>
        <div class="source-bar-track"><div class="source-bar-fill" style="width:28.4%;background:var(--warning)"></div></div>
        <div class="source-stat-pct">28.4%</div>
      </div>
      <div class="source-stat-row">
        <div class="source-stat-col">tsh</div>
        <div class="source-bar-track"><div class="source-bar-fill" style="width:9.2%;background:var(--accent3)"></div></div>
        <div class="source-stat-pct">9.2%</div>
      </div>
      <div class="source-stat-row">
        <div class="source-stat-col">t4u, fti</div>
        <div class="source-bar-track"><div class="source-bar-fill" style="width:8.7%;background:var(--accent3)"></div></div>
        <div class="source-stat-pct">8.7%</div>
      </div>
      <div class="source-stat-row">
        <div class="source-stat-col">tt4</div>
        <div class="source-bar-track"><div class="source-bar-fill" style="width:4.8%;background:var(--good)"></div></div>
        <div class="source-stat-pct">4.8%</div>
      </div>
    </div>
  </div>

  <!-- Missingness pattern tiers -->
  <div class="pattern-section">
    <div class="section-tag">Pattern Analysis</div>
    <div class="section-title">Missingness Tiers</div>
    <div class="pattern-grid">
      <div class="pattern-card">
        <div class="pattern-tier" style="color:var(--good)">✓ Complete</div>
        <div class="pattern-cols">
          <div class="pattern-col-chip">source</div>
          <div class="pattern-col-chip">class</div>
        </div>
      </div>
      <div class="pattern-card">
        <div class="pattern-tier" style="color:var(--accent3)">▲ Minimal (&lt;2%)</div>
        <div class="pattern-cols">
          <div class="pattern-col-chip">age (0.002%)</div>
          <div class="pattern-col-chip">sex (0.20%)</div>
          <div class="pattern-col-chip">tsh (0.51%)</div>
          <div class="pattern-col-chip">t3 (1.47%)</div>
          <div class="pattern-col-chip">patient_id (1.64%)</div>
        </div>
      </div>
      <div class="pattern-card">
        <div class="pattern-tier" style="color:var(--warning)">◆ Low (2–6%)</div>
        <div class="pattern-cols">
          <div class="pattern-col-chip">t4 (4.07%)</div>
          <div class="pattern-col-chip">country (5.71%)</div>
          <div class="pattern-col-chip">ethnicity (5.71%)</div>
          <div class="pattern-col-chip">diagnosis (5.71%)</div>
          <div class="pattern-col-chip">nodule_size (5.71%)</div>
          <div class="pattern-col-chip">family_history (5.71%)</div>
          <div class="pattern-col-chip">diabetes (5.71%)</div>
          <div class="pattern-col-chip">obesity (5.71%)</div>
          <div class="pattern-col-chip">iodine_def. (5.71%)</div>
        </div>
      </div>
      <div class="pattern-card">
        <div class="pattern-tier" style="color:var(--critical)">✕ Structural (≥94%)</div>
        <div class="pattern-cols">
          <div class="pattern-col-chip">21 columns</div>
          <div class="pattern-col-chip">tt4 (96.1%)</div>
          <div class="pattern-col-chip">on_antithyroid (95.9%)</div>
          <div class="pattern-col-chip">t4u (94.8%)</div>
          <div class="pattern-col-chip">fti (94.8%)</div>
          <div class="pattern-col-chip">query_* flags (94.3%)</div>
          <div class="pattern-col-chip">onantithyroid. (98.4%)</div>
          <div class="pattern-col-chip">...+ 14 more</div>
        </div>
      </div>
    </div>
  </div>

  
    
  </div>

  <div class="footer">
    <span>unified_dataset_validated.csv · 225,568 rows · 37 cols · 3 sources</span>
    <span>Generated by Claude · February 2026</span>
  </div>
</div>

<script>
// Render bar chart
const data = [
  { col: 'onantithyroidmedication', pct: 98.36 },
  { col: 'tt4', pct: 96.13 },
  { col: 'on_antithyroid_meds', pct: 95.93 },
  { col: 't4u', pct: 94.79 },
  { col: 'fti', pct: 94.79 },
  { col: 'query_hyperthyroid', pct: 94.29 },
  { col: 'query_hypothyroid', pct: 94.29 },
  { col: 'query_on_thyroxine', pct: 94.29 },
  { col: 'fti_measured', pct: 94.29 },
  { col: 't3_measured', pct: 94.29 },
  { col: 'hypopituitary', pct: 94.29 },
  { col: 'psych', pct: 94.29 },
  { col: 'pregnant', pct: 94.29 },
  { col: 'tumor', pct: 94.29 },
  { col: 'tt4_measured', pct: 94.29 },
  { col: 't4u_measured', pct: 94.29 },
  { col: 'tsh_measured', pct: 94.29 },
  { col: 'i131_treatment', pct: 94.29 },
  { col: 'goitre', pct: 94.29 },
  { col: 'lithium', pct: 94.29 },
  { col: 'on_thyroxine', pct: 94.29 },
  { col: 'diagnosis', pct: 5.71 },
  { col: 'nodule_size', pct: 5.71 },
  { col: 'family_history', pct: 5.71 },
  { col: 'ethnicity', pct: 5.71 },
  { col: 'country', pct: 5.71 },
  { col: 'diabetes', pct: 5.71 },
  { col: 'obesity', pct: 5.71 },
  { col: 'iodine_deficiency', pct: 5.71 },
  { col: 't4', pct: 4.07 },
  { col: 'patient_id', pct: 1.64 },
  { col: 't3', pct: 1.47 },
  { col: 'tsh', pct: 0.51 },
  { col: 'sex', pct: 0.20 },
  { col: 'age', pct: 0.002 },
];

function getColor(pct) {
  if (pct >= 90) return 'var(--critical)';
  if (pct >= 50) return 'var(--accent2)';
  if (pct >= 10) return 'var(--warning)';
  if (pct >= 1)  return 'var(--accent3)';
  return 'var(--good)';
}

const container = document.getElementById('barChart');
data.forEach((d, i) => {
  const row = document.createElement('div');
  row.className = 'bar-row';
  row.innerHTML = `
    <div class="bar-label">${d.col}</div>
    <div class="bar-track">
      <div class="bar-fill" style="width:0%;background:${getColor(d.pct)}" data-width="${d.pct}"></div>
    </div>
    <div class="bar-pct">${d.pct.toFixed(1)}%</div>
  `;
  container.appendChild(row);
});

// Animate bars on load
setTimeout(() => {
  document.querySelectorAll('.bar-fill').forEach(el => {
    el.style.width = el.dataset.width + '%';
  });
}, 200);
</script>
</body>
</html>
